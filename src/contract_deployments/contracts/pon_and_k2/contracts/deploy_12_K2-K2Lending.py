from web3 import Web3
from web3.middleware import construct_sign_and_send_raw_middleware
import os
import time
import logging

# Account Alias: PON
ACCOUNT_ALIAS = "PON"

# K2Lending contract bytecode
BYTE_CODE = "0x60806040523480156200001157600080fd5b506200001c62000022565b620000e3565b600054610100900460ff16156200008f5760405162461bcd60e51b815260206004820152602760248201527f496e697469616c697a61626c653a20636f6e747261637420697320696e697469604482015266616c697a696e6760c81b606482015260840160405180910390fd5b60005460ff90811614620000e1576000805460ff191660ff9081179091556040519081527f7f26b83ff96e1f2b6a682f133852f6798a09c465da95921460cefb38474024989060200160405180910390a15b565b615ff480620000f36000396000f3fe608060405234801561001057600080fd5b506004361061045f5760003560e01c8063871f42711161024c578063bdd007f711610146578063df07d118116100c3578063e99317dd11610087578063e99317dd14610a85578063edb4552914610aba578063ee14023614610acd578063f2b3ea4d14610aed578063f4f690b714610b0057600080fd5b8063df07d11814610a07578063e1b1acb714610a10578063e6c6415714610a39578063e812064f14610a4c578063e8ef91ed14610a5657600080fd5b8063d46ba1951161010a578063d46ba195146109a8578063d52ee719146109bb578063d547741f146109ce578063da9e288c146109e1578063dd62ed3e146109f457600080fd5b8063bdd007f714610969578063c07d30ff1461097c578063d148279114610985578063d158ded41461098d578063d3d3b3eb146109a057600080fd5b8063a217fddf116101d4578063aa6be30311610198578063aa6be303146108c6578063abeb0d5a146108e7578063b2ab3cf61461091a578063b6b55f2514610943578063b87f30961461095657600080fd5b8063a217fddf14610872578063a3fd09ae1461087a578063a457c2d71461088d578063a86cae1d146108a0578063a9059cbb146108b357600080fd5b806391d148541161021b57806391d148541461082757806395d89b411461083a5780639a533433146108425780639f05c3ce1461084c5780639f5f86ae1461085f57600080fd5b8063871f4271146107ee57806388856fd4146108015780638b61e3471461080a57806390810b6e1461081d57600080fd5b806336efd16f1161035d57806359442672116102e557806373b9d0c4116102a957806373b9d0c41461078e57806374198989146107a15780638382907f146107b45780638486e0d9146107c8578063851ccd83146107db57600080fd5b806359442672146106e05780635da7b1951461071557806367a89d861461072857806370a0823114610752578063722382f21461077b57600080fd5b80633ae499181161032c5780633ae499181461068a5780633d8bd6ea1461069d578063477404a0146106b05780634ef21dca146106c35780635834dd03146106cd57600080fd5b806336efd16f1461063e57806337c3a2791461065157806338d0743614610664578063395093511461067757600080fd5b80631ee0c359116103eb57806328fd10d7116103af57806328fd10d7146105b95780632f2ff15d146105f65780632f86556814610609578063313ce5671461061c57806336568abe1461062b57600080fd5b80631ee0c359146105395780632131c68c1461055d57806323b872dd14610570578063248a9ca31461058357806327fcf6e5146105a657600080fd5b80630d363cdd116104325780630d363cdd146104df578063114470b3146104f657806312fb2c601461050957806318160ddd1461051e5780631b19304a1461052657600080fd5b806301ffc9a71461046457806306fdde031461048c578063095ea7b3146104a15780630b21b8e2146104b4575b600080fd5b610477610472366004614eb4565b610b13565b60405190151581526020015b60405180910390f35b610494610b4a565b6040516104839190614f2e565b6104776104af366004614f66565b610bdc565b609c546104c7906001600160a01b031681565b6040516001600160a01b039091168152602001610483565b6104e860a15481565b604051908152602001610483565b6104e8610504366004614fa1565b610bf4565b61051c610517366004614fce565b610cd2565b005b60d7546104e8565b61051c61053436600461505d565b610eb5565b61047761054736600461505d565b6101196020526000908152604090205460ff1681565b6099546104c7906001600160a01b031681565b61047761057e36600461507a565b610ef3565b6104e86105913660046150bb565b60009081526065602052604090206001015490565b61051c6105b43660046151b1565b610f3b565b6105e16105c736600461505d565b61010e602052600090815260409020805460019091015482565b60408051928352602083019190915201610483565b61051c6106043660046152a2565b6110c3565b61051c61061736600461505d565b6110ed565b60405160128152602001610483565b61051c6106393660046152a2565b6112c6565b61051c61064c3660046152a2565b611344565b61051c61065f366004615430565b6113fc565b61051c610672366004615547565b611516565b610477610685366004614f66565b611646565b6104e861069836600461505d565b611668565b61051c6106ab36600461556c565b6116a2565b6104e86106be36600461505d565b611921565b6104e86101085481565b61051c6106db3660046155bb565b611945565b6104c76106ee3660046155e7565b8051602081830181018051610113825292820191909301209152546001600160a01b031681565b61051c61072336600461505d565b6119b6565b6104c761073636600461505d565b610118602052600090815260409020546001600160a01b031681565b6104e861076036600461505d565b6001600160a01b0316600090815260d5602052604090205490565b61051c61078936600461561b565b6119f1565b61051c61079c366004615656565b611a21565b61051c6107af366004614f66565b611a30565b610117546104c7906001600160a01b031681565b609b546104c7906001600160a01b031681565b61051c6107e93660046156d1565b611b7e565b6104e86107fc36600461505d565b611c72565b6104e860985481565b609a546104c7906001600160a01b031681565b6104e86101095481565b6104776108353660046152a2565b611dc5565b610494611df0565b6104e861010c5481565b61051c61085a36600461505d565b611dff565b61051c61086d36600461505d565b611e9c565b6104e8600081565b61051c6108883660046155e7565b611ee4565b61047761089b366004614f66565b611fe0565b61051c6108ae3660046150bb565b612066565b6104776108c1366004614f66565b61207c565b6104e86108d436600461505d565b6101126020526000908152604090205481565b6105e16108f53660046155e7565b8051602081830181018051610114825292820191909301209152805460019091015482565b6104c7610928366004614fa1565b609d602052600090815260409020546001600160a01b031681565b61051c6109513660046150bb565b61209d565b61051c610964366004615732565b6120a7565b61051c61097736600461505d565b612408565b610108546104e8565b61051c61256d565b61051c61099b366004615789565b612698565b6104e86127b0565b6104e86109b636600461505d565b612829565b61051c6109c93660046155e7565b612997565b61051c6109dc3660046152a2565b612a12565b61051c6109ef3660046157ce565b612a37565b6104e8610a02366004615847565b612d25565b6104e860a25481565b610a23610a1e3660046150bb565b612d50565b6040516104839a99989796959493929190615865565b61051c610a473660046158d1565b612e36565b6104e861010a5481565b610477610a643660046155e7565b80516020818301810180516101168252928201919093012091525460ff1681565b6104c7610a933660046155e7565b8051602081830181018051610115825292820191909301209152546001600160a01b031681565b61051c610ac836600461505d565b612e45565b610ae0610adb36600461505d565b613107565b6040516104839190615936565b6104e8610afb3660046155e7565b6132aa565b61051c610b0e36600461505d565b6132e9565b60006001600160e01b03198216637965db0b60e01b1480610b4457506301ffc9a760e01b6001600160e01b03198316145b92915050565b606060d88054610b59906159ef565b80601f0160208091040260200160405190810160405280929190818152602001828054610b85906159ef565b8015610bd25780601f10610ba757610100808354040283529160200191610bd2565b820191906000526020600020905b815481529060010190602001808311610bb557829003601f168201915b5050505050905090565b600033610bea81858561335d565b5060019392505050565b600080610c016101085490565b90506000609d81858015610c1757610c17615a23565b8015610c2557610c25615a23565b815260200190815260200160002060009054906101000a90046001600160a01b03166001600160a01b031663620e33e06040518163ffffffff1660e01b8152600401602060405180830381865afa158015610c84573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610ca89190615a39565b9050676765c793fa10079d601b1b610cc08284615a68565b610cca9190615a7f565b949350505050565b610cda61256d565b6001600160a01b0387166000908152610112602052604090205415610d1257604051631fcecd5360e21b815260040160405180910390fd5b6000610d248789888860008989613481565b9050610d336020830183615aa1565b15610df157610117546001600160a01b0316630b5b1ffc89610d5b606086016040870161505d565b609954609a546001600160a01b03918216911660608801356020890135610d8560808b018b615abe565b6040518963ffffffff1660e01b8152600401610da8989796959493929190615b0b565b6020604051808303816000875af1158015610dc7573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610deb9190615b79565b50610e52565b61011754604051638b8abdff60e01b81526001600160a01b038a8116600483015290911690638b8abdff90602401600060405180830381600087803b158015610e3957600080fd5b505af1158015610e4d573d6000803e3d6000fd5b505050505b6040805186815260208101869052908101849052606081018290526001600160a01b0380881691908a16907f72a4a025c487d366eee92c8f9d23fab7e0b3ae66d0e3b4b8df9f30d49c645014906080015b60405180910390a35050505050505050565b600080516020615f7f833981519152610ecd816136d7565b506001600160a01b0316600090815261011960205260409020805460ff19166001179055565b600083610eff81611dff565b83610f0981611dff565b6001600160a01b0386163314610f2457610f248633866136e1565b610f2f86868661375b565b50600195945050505050565b600054610100900460ff1615808015610f5b5750600054600160ff909116105b80610f755750303b158015610f75575060005460ff166001145b610fdd5760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b60648201526084015b60405180910390fd5b6000805460ff191660011790558015611000576000805461ff0019166101001790555b6110108c8c8c8c8a8a8a8a613917565b61101a8888613a3a565b6001600160a01b038c166110415760405163d92e233d60e01b815260040160405180910390fd5b4261010d5560016101108190556101115561011780546001600160a01b0319166001600160a01b03841617905580156110b5576000805461ff0019169055604051600181527f7f26b83ff96e1f2b6a682f133852f6798a09c465da95921460cefb3847402498906020015b60405180910390a15b505050505050505050505050565b6000828152606560205260409020600101546110de816136d7565b6110e88383613a6b565b505050565b6110f561256d565b806110ff81613af1565b6001600160a01b0382166000908152610112602090815260408083205480845261010f9092528220909161113285612829565b90506000676765c793fa10079d601b1b60a154836111509190615a68565b61115a9190615a7f565b90508260070154811061118057604051632ee8482f60e21b815260040160405180910390fd5b81600061118e600a83615a7f565b6097549091506111a8906001600160a01b03163383613b2a565b6111b28185615b96565b935060006111c1600286615a7f565b90506111cc81613b8d565b6099546111f9906001600160a01b03166111e68388615b96565b6097546001600160a01b03169190613b2a565b60018601546001600160a01b031661121088613bf3565b6001600160a01b0381161561127a5760405163d141286f60e01b8152600481018590523360248201526001600160a01b0382169063d141286f90604401600060405180830381600087803b15801561126757600080fd5b505af1925050508015611278575060015b505b60405184815233906001600160a01b038c16907fde0aa27286f5cb3a4ed853dc4823ead62d63e92cdf13de09d6aece56970721a49060200160405180910390a350505050505050505050565b6001600160a01b03811633146113365760405162461bcd60e51b815260206004820152602f60248201527f416363657373436f6e74726f6c3a2063616e206f6e6c792072656e6f756e636560448201526e103937b632b9903337b91039b2b63360891b6064820152608401610fd4565b6113408282613d09565b5050565b61134c61256d565b8061135681611dff565b609e5483101561137957604051632dead04760e11b815260040160405180910390fd5b609754611391906001600160a01b0316333086613d70565b8261010860008282546113a49190615ba9565b909155506113b490508284613da8565b816001600160a01b03167f3f2e1e716c1d26a1c6d79f6ea00b9c19d70895ed10494cf03e058fa6d00ed5c5846040516113ef91815260200190565b60405180910390a2505050565b835160008190036114205760405163b37a457f60e01b815260040160405180910390fd5b835181146114415760405163251f56a160e21b815260040160405180910390fd5b825181146114625760405163251f56a160e21b815260040160405180910390fd5b815181146114835760405163251f56a160e21b815260040160405180910390fd5b60005b8181101561150e576114fe8682815181106114a3576114a3615bbc565b60200260200101518683815181106114bd576114bd615bbc565b60200260200101518684815181106114d7576114d7615bbc565b60200260200101518685815181106114f1576114f1615bbc565b6020026020010151613e7d565b61150781615bd2565b9050611486565b505050505050565b61151e61256d565b3361152881611dff565b60a3543360009081526101076020526040902054429161154791615ba9565b1115611566576040516359a897b160e01b815260040160405180910390fd5b609c5460405163ccad973d60e01b8152336004820152602481018590526001600160a01b039091169063ccad973d90604401600060405180830381600087803b1580156115b257600080fd5b505af11580156115c6573d6000803e3d6000fd5b505050506115d433846142f7565b8261010860008282546115e79190615b96565b909155505081156115fd576115fb3361443e565b505b609754611614906001600160a01b03163385613b2a565b60405183815233907f2e9d0dd8e70301779c1e8e033bbe978ad745957257e0b92db06b22016ea07d5b906020016113ef565b600033610bea8185856116598383612d25565b6116639190615ba9565b61335d565b600061167261256d565b8161167c81611dff565b6001600160a01b038316600090815261010e602052604090206001015491505b50919050565b600080516020615f7f8339815191526116ba816136d7565b6116c261256d565b816116cc81611ee4565b6000610113846040516116df9190615beb565b908152604051908190036020019020546001600160a01b03169050806117185760405163397e9da560e21b815260040160405180910390fd5b60016101168560405161172b9190615beb565b908152604051908190036020018120805492151560ff19909316929092179091556000906101149061175e908790615beb565b9081526020016040518091039020600101549050610114856040516117839190615beb565b90815260200160405180910390206001016000905560008111156118cc5760006117ae600283615a7f565b905060006117bd600283615a7f565b90506000886001600160a01b0316856001600160a01b0316146117e057886117ed565b6099546001600160a01b03165b9050811561181257609954609754611812916001600160a01b03918216911684613b2a565b600061181e8385615b96565b111561183257611832816111e68486615b96565b600061183e8486615b96565b905080156118c75761184f81613b8d565b61185889611ee4565b60006101148a60405161186b9190615beb565b90815260200160405180910390206001015490506101148a6040516118909190615beb565b90815260200160405180910390206001016000905560008111156118c5576097546118c5906001600160a01b03168483613b2a565b505b505050505b6118d585614529565b816001600160a01b03167f1b252e34ac943dc2526ff9829aac70bced705e301a7ae39091f0b3749b81c8a8866001604051611911929190615c07565b60405180910390a2505050505050565b600061192b61256d565b8161193581611dff565b61193e8361443e565b9392505050565b600080516020615f9f83398151915261195d816136d7565b81609d600085801561197157611971615a23565b801561197f5761197f615a23565b815260200190815260200160002060006101000a8154816001600160a01b0302191690836001600160a01b03160217905550505050565b600080516020615f9f8339815191526119ce816136d7565b50609c80546001600160a01b0319166001600160a01b0392909216919091179055565b600080516020615f9f833981519152611a09816136d7565b50609e94909455609f9290925560a35560a15560a255565b61150e33878787878787610cd2565b611a3861256d565b609754611a50906001600160a01b0316333084613d70565b6001600160a01b03821660009081526101126020908152604080832054835261010f90915281206007810154909103611a9c5760405163059a18c760e41b815260040160405180910390fd5b60008160070154831115611ac3576007820154611ab99084615b96565b9050816007015492505b6000611ace85611c72565b611ae3676765c793fa10079d601b1b86615a68565b611aed9190615a7f565b61010c8054820190556005840180548201905560078401805486900390556101098054869003905590508115611b3457609754611b34906001600160a01b03163384613b2a565b846001600160a01b03167ff3efa25450caac2dba130e27919ec6f00d46514cfa76451dacea729e334e594f85604051611b6f91815260200190565b60405180910390a25050505050565b600080516020615f7f833981519152611b96816136d7565b611b9e61256d565b81611ba881611ee4565b600061011384604051611bbb9190615beb565b908152604051908190036020019020546001600160a01b03908116915085168114611bf8576040516282b42960e81b815260040160405180910390fd5b611c03848688614605565b600161011685604051611c169190615beb565b908152604051908190036020018120805492151560ff19909316929092179091556001600160a01b038216907f1b252e34ac943dc2526ff9829aac70bced705e301a7ae39091f0b3749b81c8a890611911908790600090615c07565b6001600160a01b038082166000908152610112602090815260408083205480845261010f8352818420825161014081018452815487168152600182015487169481019490945260028101549095169183019190915260038401805493949193859392916060840191611ce3906159ef565b80601f0160208091040260200160405190810160405280929190818152602001828054611d0f906159ef565b8015611d5c5780601f10611d3157610100808354040283529160200191611d5c565b820191906000526020600020905b815481529060010190602001808311611d3f57829003601f168201915b5050505050815260200160048201548152602001600582015481526020016006820154815260200160078201548152602001600882015481526020016009820154815250509050428160c0015111611db5576000610cca565b428160c00151610cca9190615b96565b60009182526065602090815260408084206001600160a01b0393909316845291905290205460ff1690565b606060d98054610b59906159ef565b6001600160a01b038116600090815260d5602090815260408083205461010e90925282205461010b54919291676765c793fa10079d601b1b918491611e449190615b96565b611e4e9190615a68565b611e589190615a7f565b61010b546001600160a01b038516600090815261010e60205260408120918255600190910180549293508392909190611e92908490615ba9565b9091555050505050565b600080516020615f9f833981519152611eb4816136d7565b611ecc600080516020615f9f83398151915283613a6b565b611340600080516020615f9f83398151915233613d09565b6000806001600160a01b031661011383604051611f019190615beb565b908152604051908190036020019020546001600160a01b031614611f2e5768014d1120d7b1600000611f31565b60005b90506000676765c793fa10079d601b1b8261011485604051611f539190615beb565b9081526040519081900360200190205461010b54611f719190615b96565b611f7b9190615a68565b611f859190615a7f565b905061010b5461011484604051611f9c9190615beb565b90815260405190819003602001812091909155819061011490611fc0908690615beb565b90815260200160405180910390206001016000828254611e929190615ba9565b60003381611fee8286612d25565b90508381101561204e5760405162461bcd60e51b815260206004820152602560248201527f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f77604482015264207a65726f60d81b6064820152608401610fd4565b61205b828686840361335d565b506001949350505050565b6120703382611a30565b61207933612e45565b50565b60003361208881611dff565b8361209281611dff565b61205b33868661375b565b6120798133611344565b7f3204c940063673962b481a0395619b3dbbd137589c419e993978c1c71bcf68ec6120d1816136d7565b836120db81613af1565b6120e361256d565b6001600160a01b0385166000908152610112602090815260408083205480845261010f9092528220909188600181111561211f5761211f615a23565b14801561212f5750806008015486115b1561214d576040516301c7bbc760e31b815260040160405180910390fd5b600188600181111561216157612161615a23565b1480156121715750806009015486115b1561218f576040516308b0696360e21b815260040160405180910390fd5b600061219a88612829565b9050868110156121bd57604051632b49e69b60e21b815260040160405180910390fd5b6000676765c793fa10079d601b1b60a154836121d99190615a68565b6121e39190615a7f565b90508061010854116122085760405163430344b560e11b815260040160405180910390fd5b60018301546001600160a01b031688821015612241576122288984615b96565b925061223383613b8d565b61223c85613bf3565b612310565b600061224c8b611c72565b9050600081612266676765c793fa10079d601b1b8d615a68565b6122709190615a7f565b90508a676765c793fa10079d601b1b6122898484615a68565b6122939190615a7f565b10156122a5576122a281615bd2565b90505b8061010c60008282546122b89190615b96565b92505081905550808660050160008282546122d39190615b96565b925050819055508a8660070160008282546122ee9190615ba9565b925050819055508a61010960008282546123089190615ba9565b909155505050505b600061231d60028b615a7f565b609754909150612337906001600160a01b03168a83613b2a565b609954612351906001600160a01b03166111e6838d615b96565b6001600160a01b038216156123bd5760405163728a355760e01b81526001600160a01b0383169063728a355790612390908f908e908e90600401615c2b565b600060405180830381600087803b1580156123aa57600080fd5b505af19250505080156123bb575060015b505b604080516001600160a01b03808e168252602082018d90528b16918101919091527fd87c3348a79019696e9b472cb0efe979015741dd3a1c95f43cc26dd1ace903c0906060016110ac565b336001600160a01b0382160361241d57600080fd5b33600090815261011860205260409020546001600160a01b03908116908216810361244757600080fd5b3360009081526101186020526040902080546001600160a01b0319166001600160a01b03848116919091179091558116156124d057604051631d1a9d7560e31b81523360048201526001600160a01b0382169063e8d4eba890602401600060405180830381600087803b1580156124bd57600080fd5b505af19250505080156124ce575060015b505b6001600160a01b03821615612533576040516353246b6360e01b81523360048201526001600160a01b038316906353246b6390602401600060405180830381600087803b15801561252057600080fd5b505af1925050508015612531575060015b505b6040516001600160a01b0383169033907ffafe7d3935b3d477f54a95ec2b64a425faa83bb26b14a7ef796556780913eb4190600090a35050565b6000805b6101115461011054101561263a575061011054600090815261010f6020526040902060068101541561261f5742816006015411156125db5761010d546125b79042615b96565b61010c546125c59190615a68565b6125cf9083615ba9565b4261010d55915061263a565b61010d5481600601546125ee9190615b96565b61010c546125fc9190615a68565b6126069083615ba9565b600682015461010d556101105490925061261f90613bf3565b610110805490600061263083615bd2565b9190505550612571565b4261010d55610108541561267357610108546126569083615a7f565b61010b60008282546126689190615ba9565b909155506113409050565b609954611340906001600160a01b03166111e6676765c793fa10079d601b1b85615a7f565b600080516020615f7f8339815191526126b0816136d7565b6126b861256d565b60008080805b85518110156127695760008060006126ee8985815181106126e1576126e1615bbc565b60200260200101516146b1565b919450925090506001600160a01b03851661270b5780945061273d565b846001600160a01b0316816001600160a01b03161461273d57604051634e46966960e11b815260040160405180910390fd5b6127478388615ba9565b96506127538287615ba9565b95505050508061276290615bd2565b90506126be565b506001600160a01b0386161561277c5750845b609754612793906001600160a01b03168285613b2a565b60995460975461150e916001600160a01b03918216911684613b2a565b61010a54610110545b6101115481101561282557600081815261010f60205260409020600601541561281557600081815261010f6020526040902060060154421061282557600081815261010f60205260409020600401546128129083615b96565b91505b61281e81615bd2565b90506127b9565b5090565b6001600160a01b038082166000908152610112602090815260408083205480845261010f835281842082516101408101845281548716815260018201548716948101949094526002810154909516918301919091526003840180549394919385939291606084019161289a906159ef565b80601f01602080910402602001604051908101604052809291908181526020018280546128c6906159ef565b80156129135780601f106128e857610100808354040283529160200191612913565b820191906000526020600020905b8154815290600101906020018083116128f657829003601f168201915b5050505050815260200160048201548152602001600582015481526020016006820154815260200160078201548152602001600882015481526020016009820154815250509050428160c001511161296c576000610cca565b676765c793fa10079d601b1b428260c001516129889190615b96565b8260a00151610cc09190615a68565b336129a181613af1565b3360009081526101126020908152604080832054835261010f90915290206003016129cc8382615cb0565b50336001600160a01b03167f261613d5a15e1ec2ea1c5f6d9f4c3ffd8cb0790fe3b0560cd1e7dc521522846a83604051612a069190614f2e565b60405180910390a25050565b600082815260656020526040902060010154612a2d816136d7565b6110e88383613d09565b612a3f61256d565b86612a4981613af1565b6001600160a01b0388166000908152610112602090815260408083205480845261010f909252909120600781015415612a955760405163901f150960e01b815260040160405180910390fd5b6000612aa08b612829565b90506000888360040154612ab49190615ba9565b905060008615612add57612ac785613bf3565b612ad68c8e8d85878e8e613481565b9050612c43565b6000612ae88d610bf4565b90508a61010a54612af99190615ba9565b811015612b195760405163cc3bab8f60e01b815260040160405180910390fd5b6000612b3b8e8584896004015461010a54612b349190615b96565b8f8f6147c7565b90506000428760060154612b4f9190615b96565b90506000676765c793fa10079d601b1b612b698385615a68565b612b739190615a7f565b612b7e906001615ba9565b905086811015612ba15760405163d801394b60e01b815260040160405180910390fd5b86811115612bce57612bb38782615b96565b609754909550612bce906001600160a01b0316333088613d70565b8d61010a6000828254612be19190615ba9565b9091555050600588015461010c54612bfa908590615ba9565b612c049190615b96565b61010c5550506002860180546001600160a01b0319166001600160a01b038f161790556004860184905560058601555060088401899055600984018890555b61011754604051638b8abdff60e01b81526001600160a01b038f8116600483015290911690638b8abdff90602401600060405180830381600087803b158015612c8b57600080fd5b505af1158015612c9f573d6000803e3d6000fd5b505050508a6001600160a01b03168d6001600160a01b03167ff558d2db5a48868d886ff421f4ecdb1ef2ef5016d3fb9268ce3e25268dd3c9778c8c8c8c87604051612d0e9594939291909485526020850193909352604084019190915215156060830152608082015260a00190565b60405180910390a350505050505050505050505050565b6001600160a01b03918216600090815260d66020908152604080832093909416825291909152205490565b61010f6020526000908152604090208054600182015460028301546003840180546001600160a01b0394851695938516949092169291612d8f906159ef565b80601f0160208091040260200160405190810160405280929190818152602001828054612dbb906159ef565b8015612e085780601f10612ddd57610100808354040283529160200191612e08565b820191906000526020600020905b815481529060010190602001808311612deb57829003601f168201915b505050505090806004015490806005015490806006015490806007015490806008015490806009015490508a565b61150e33878787878787612a37565b612e4d61256d565b80612e5781613af1565b6001600160a01b0382163314801590612e735750600061010854115b15612e90576040516282b42960e81b815260040160405180910390fd5b6001600160a01b0382166000908152610112602090815260408083205480845261010f909252909120600781015415612edc5760405163901f150960e01b815260040160405180910390fd5b60048101546101085410158015612f6957506101175460405163393eb22b60e21b8152600481018490526000916001600160a01b03169063e4fac8ac90602401602060405180830381865afa158015612f39573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612f5d9190615b79565b6001600160a01b031614155b8015612f785750428160060154115b15612f9657604051631b231ed360e21b815260040160405180910390fd5b6000612fa185612829565b905060008260040154612fb46101085490565b1015612fc1576000612fe5565b676765c793fa10079d601b1b60a25483612fdb9190615a68565b612fe59190615a7f565b90506000612ff38284615b96565b111561300757613007866111e68385615b96565b801561304157600061301a600283615a7f565b905061302581613b8d565b60995461303f906001600160a01b03166111e68385615b96565b505b60018301546001600160a01b031661305885613bf3565b6001600160a01b038116156130c25760405163d141286f60e01b8152600481018490523360248201526001600160a01b0382169063d141286f90604401600060405180830381600087803b1580156130af57600080fd5b505af19250505080156130c0575060015b505b6040516001600160a01b03881681527f98cd97fc1a1cc958cbd729b1bb531d4f3ea4925470bf23ea9af386640cbd07be9060200160405180910390a150505050505050565b61317860405180610140016040528060006001600160a01b0316815260200160006001600160a01b0316815260200160006001600160a01b03168152602001606081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b6001600160a01b0380831660009081526101126020908152604080832054835261010f82529182902082516101408101845281548516815260018201548516928101929092526002810154909316918101919091526003820180549192916060840191906131e5906159ef565b80601f0160208091040260200160405190810160405280929190818152602001828054613211906159ef565b801561325e5780601f106132335761010080835404028352916020019161325e565b820191906000526020600020905b81548152906001019060200180831161324157829003601f168201915b5050505050815260200160048201548152602001600582015481526020016006820154815260200160078201548152602001600882015481526020016009820154815250509050919050565b60006132b461256d565b816132be81611ee4565b610114836040516132cf9190615beb565b908152602001604051809103902060010154915050919050565b336132f381613af1565b3360008181526101126020908152604080832054835261010f90915280822060010180546001600160a01b0319166001600160a01b03871690811790915590519092917f2f275d697ec56028820be673704d708e347a20d68d6bf1e13b5c47b64f94914a91a35050565b6001600160a01b0383166133bf5760405162461bcd60e51b8152602060048201526024808201527f45524332303a20617070726f76652066726f6d20746865207a65726f206164646044820152637265737360e01b6064820152608401610fd4565b6001600160a01b0382166134205760405162461bcd60e51b815260206004820152602260248201527f45524332303a20617070726f766520746f20746865207a65726f206164647265604482015261737360f01b6064820152608401610fd4565b6001600160a01b03838116600081815260d6602090815260408083209487168084529482529182902085905590518481527f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925910160405180910390a3505050565b60008061348d89610bf4565b90508561010a5461349e9190615ba9565b8110156134be5760405163cc3bab8f60e01b815260040160405180910390fd5b60006134d18a888461010a5489896147c7565b90506000676765c793fa10079d601b1b609854836134ef9190615a68565b6134f99190615a7f565b613504906001615ba9565b9050868110156135275760405163d801394b60e01b815260040160405180910390fd5b86811115613554576135398782615b96565b609754909450613554906001600160a01b0316333087613d70565b6040518061014001604052808b6001600160a01b0316815260200160006001600160a01b031681526020018a6001600160a01b03168152602001604051806020016040528060008152508152602001898152602001838152602001609854426135bd9190615ba9565b81526000602080830182905260408084018b905260609384018a905261011154835261010f825291829020845181546001600160a01b03199081166001600160a01b039283161783559286015160018301805485169183169190911790559285015160028201805490931693169290921790559082015160038201906136439082615cb0565b506080820151600482015560a0820151600582015560c0820151600682015560e0820151600782015561010082015160088201556101209091015160099091015561011180546001600160a01b038c166000908152610112602052604081208290559091906136b183615bd2565b909155505061010a805490980190975561010c8054909101905550979650505050505050565b61207981336148ff565b60006136ed8484612d25565b9050600019811461375557818110156137485760405162461bcd60e51b815260206004820152601d60248201527f45524332303a20696e73756666696369656e7420616c6c6f77616e63650000006044820152606401610fd4565b613755848484840361335d565b50505050565b6001600160a01b0383166137bf5760405162461bcd60e51b815260206004820152602560248201527f45524332303a207472616e736665722066726f6d20746865207a65726f206164604482015264647265737360d81b6064820152608401610fd4565b6001600160a01b0382166138215760405162461bcd60e51b815260206004820152602360248201527f45524332303a207472616e7366657220746f20746865207a65726f206164647260448201526265737360e81b6064820152608401610fd4565b61382c838383614958565b6001600160a01b038316600090815260d56020526040902054818110156138a45760405162461bcd60e51b815260206004820152602660248201527f45524332303a207472616e7366657220616d6f756e7420657863656564732062604482015265616c616e636560d01b6064820152608401610fd4565b6001600160a01b03808516600081815260d5602052604080822086860390559286168082529083902080548601905591517fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef906139049086815260200190565b60405180910390a36137558484846149a0565b600054610100900460ff1661393e5760405162461bcd60e51b8152600401610fd490615d6f565b6139466149ce565b61395e600080516020615f9f83398151915288613a6b565b6139967f3204c940063673962b481a0395619b3dbbd137589c419e993978c1c71bcf68ec600080516020615f9f8339815191526149f7565b6139bc600080516020615f7f833981519152600080516020615f9f8339815191526149f7565b609780546001600160a01b03199081166001600160a01b039a8b1617909155609980548216978a1697909717909655609a8054871695891695909517909455609b8054861693881693909317909255609c805490941695169490941790915567016345785d8a0000609e5562ed4e0060985560a1929092555060a255565b600054610100900460ff16613a615760405162461bcd60e51b8152600401610fd490615d6f565b6113408282614a42565b613a758282611dc5565b6113405760008281526065602090815260408083206001600160a01b03851684529091529020805460ff19166001179055613aad3390565b6001600160a01b0316816001600160a01b0316837f2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d60405160405180910390a45050565b6001600160a01b038116600090815261011260205260408120549003612079576040516308d1fde360e11b815260040160405180910390fd5b6040516001600160a01b0383166024820152604481018290526110e890849063a9059cbb60e01b906064015b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b031990931692909217909152614a82565b6101085415613bd65761010854613baf676765c793fa10079d601b1b83615a68565b613bb99190615a7f565b61010b6000828254613bcb9190615ba9565b909155506120799050565b609954609754612079916001600160a01b03918216911683613b2a565b600081815261010f6020526040812060070154610109805491929091613c1a908490615b96565b9091555050600081815261010f602052604081206004015461010a805491929091613c46908490615b96565b9091555050600081815261010f602052604081206005015461010c805491929091613c72908490615b96565b9091555050600081815261010f6020818152604080842080546001600160a01b03168552610112835290842084905584845291905280546001600160a01b0319908116825560018201805482169055600282018054909116905590613cda6003830182614e6a565b506000600482018190556005820181905560068201819055600782018190556008820181905560099091015550565b613d138282611dc5565b156113405760008281526065602090815260408083206001600160a01b0385168085529252808320805460ff1916905551339285917ff6391f5c32d9c69d2a47ea670b442974b53935d1edc7fd64eb21e047a839171b9190a45050565b6040516001600160a01b03808516602483015283166044820152606481018290526137559085906323b872dd60e01b90608401613b56565b6001600160a01b038216613dfe5760405162461bcd60e51b815260206004820152601f60248201527f45524332303a206d696e7420746f20746865207a65726f2061646472657373006044820152606401610fd4565b613e0a60008383614958565b8060d76000828254613e1c9190615ba9565b90915550506001600160a01b038216600081815260d560209081526040808320805486019055518481527fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef910160405180910390a3611340600083836149a0565b613e8561256d565b83613e8f81611ee4565b336000908152610119602052604090205460ff1615613ec15760405163141a546d60e11b815260040160405180910390fd5b61011685604051613ed29190615beb565b9081526040519081900360200190205460ff1615613f035760405163141a546d60e11b815260040160405180910390fd5b60006001600160a01b031661011386604051613f1f9190615beb565b908152604051908190036020019020546001600160a01b031614613f5657604051631a2684a760e01b815260040160405180910390fd5b609b54604051639325eb2b60e01b81526001600160a01b0390911690639325eb2b90613f8e9088903390899089908990600401615dba565b6020604051808303816000875af1158015613fad573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190613fd19190615e21565b613fee57604051633fb0bba560e11b815260040160405180910390fd5b609c54604051631762d20960e11b81526001600160a01b0390911690632ec5a4129061401e908890600401614f2e565b602060405180830381865afa15801561403b573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061405f9190615e21565b61407c576040516365cb766560e01b815260040160405180910390fd5b609b54604051632218ef1d60e01b8152600091829182916001600160a01b031690632218ef1d906140b1908b90600401614f2e565b61010060405180830381865afa1580156140cf573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906140f39190615e3e565b50509550955095505050508060ff166000148061411357508060ff166003145b8061412157508060ff166004145b8061412f57508060ff166005145b1561414d5760405163601ce53960e01b815260040160405180910390fd5b866001600160a01b0316836001600160a01b03161461417f57604051633fb0bba560e11b815260040160405180910390fd5b6001600160a01b03821633146141a857604051633b5a7b2f60e01b815260040160405180910390fd5b68014d1120d7b160000061010860008282546141c49190615ba9565b9250508190555033610113896040516141dd9190615beb565b908152602001604051809103902060006101000a8154816001600160a01b0302191690836001600160a01b0316021790555086610115896040516142219190615beb565b908152604080516020928190038301812080546001600160a01b0319166001600160a01b039586161790553360009081526101079093529120429055609c54634488d44f60e11b825290911690638911a89e90614282908b90600401614f2e565b600060405180830381600087803b15801561429c57600080fd5b505af11580156142b0573d6000803e3d6000fd5b50505050866001600160a01b0316336001600160a01b03167f135244207bef9245c129994948a16e074f529f83cac6f0f33b5fb82579880a168a604051610ea39190614f2e565b6001600160a01b0382166143575760405162461bcd60e51b815260206004820152602160248201527f45524332303a206275726e2066726f6d20746865207a65726f206164647265736044820152607360f81b6064820152608401610fd4565b61436382600083614958565b6001600160a01b038216600090815260d56020526040902054818110156143d75760405162461bcd60e51b815260206004820152602260248201527f45524332303a206275726e20616d6f756e7420657863656564732062616c616e604482015261636560f01b6064820152608401610fd4565b6001600160a01b038316600081815260d560209081526040808320868603905560d780548790039055518581529192917fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef910160405180910390a36110e8836000846149a0565b6001600160a01b038116600090815261010e6020526040812060010180549082905590620186a061447161271084615a68565b61447b9190615a7f565b90506144878183615b96565b9150600061449484614b57565b90506144c26001600160a01b0382166144ad57846144af565b815b6097546001600160a01b03169085613b2a565b6099546097546144df916001600160a01b03918216911684613b2a565b836001600160a01b03167f8c9491fd5f3c775bffa1c39d264f940a28a9a3f1f74ef357f70b1954ac0161e18460405161451a91815260200190565b60405180910390a25050919050565b68014d1120d7b160000061010860008282546145459190615b96565b90915550506040516101159061455c908390615beb565b90815260405190819003602001812080546001600160a01b031916905561011390614588908390615beb565b90815260405190819003602001812080546001600160a01b0319169055609c546336ef2cd160e11b82526001600160a01b031690636dde59a2906145d0908490600401614f2e565b600060405180830381600087803b1580156145ea57600080fd5b505af11580156145fe573d6000803e3d6000fd5b5050505050565b60a3546001600160a01b03831660009081526101076020526040902054429161462d91615ba9565b111561464c576040516359a897b160e01b815260040160405180910390fd5b600080600061465a866146b1565b9194509250905061468b6001600160a01b03851661467857816144af565b6097546001600160a01b03168585613b2a565b6099546097546146a8916001600160a01b03918216911684613b2a565b61150e86614529565b6000806000610115846040516146c79190615beb565b908152604051908190036020019020546001600160a01b03169050806147005760405163d92e233d60e01b815260040160405180910390fd5b61470984611ee4565b6101148460405161471a9190615beb565b908152604051908190036020019020600101549250620186a061473f61271085615a68565b6147499190615a7f565b91506147558284615b96565b9250610114846040516147689190615beb565b908152602001604051809103902060010160009055806001600160a01b03167fcbe35de7ffd55cca3340e16c7e5883d4b98e913eb3a9fa3d9714b85e6b08eae585856040516147b8929190615ed0565b60405180910390a29193909250565b600080609d818980156147dc576147dc615a23565b80156147ea576147ea615a23565b81526020810191909152604001600020546001600160a01b03160361482257604051637ddddb1160e11b815260040160405180910390fd5b6301e13380609d600089801561483a5761483a615a23565b801561484857614848615a23565b815260208101919091526040908101600020549051635cdcd4ff60e01b815260048101889052602481018790526044810189905260648101869052608481018590526001600160a01b0390911690635cdcd4ff9060a401602060405180830381865afa1580156148bc573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906148e09190615a39565b6148ea9088615a68565b6148f49190615a7f565b979650505050505050565b6149098282611dc5565b6113405761491681614baa565b614921836020614bbc565b604051602001614932929190615ef2565b60408051601f198184030181529082905262461bcd60e51b8252610fd491600401614f2e565b6001600160a01b0383161580159061497857506001600160a01b03821615155b156110e857609f548110156110e857604051636989e9d160e11b815260040160405180910390fd5b506001600160a01b039182166000908152610107602052604080822042908190559290931681529190912055565b600054610100900460ff166149f55760405162461bcd60e51b8152600401610fd490615d6f565b565b600082815260656020526040808220600101805490849055905190918391839186917fbd79b86ffe0ab8e8776151514217cd7cacd52c909f66475c3af44e129f0b00ff9190a4505050565b600054610100900460ff16614a695760405162461bcd60e51b8152600401610fd490615d6f565b60d8614a758382615cb0565b5060d96110e88282615cb0565b6000614ad7826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b0316614d579092919063ffffffff16565b9050805160001480614af8575080806020019051810190614af89190615e21565b6110e85760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b6064820152608401610fd4565b6001600160a01b03808216600090815261011860205260408120549091168015801590614b8d57506001600160a01b0381163314155b15610b44576040516282b42960e81b815260040160405180910390fd5b6060610b446001600160a01b03831660145b60606000614bcb836002615a68565b614bd6906002615ba9565b6001600160401b03811115614bed57614bed6150d4565b6040519080825280601f01601f191660200182016040528015614c17576020820181803683370190505b509050600360fc1b81600081518110614c3257614c32615bbc565b60200101906001600160f81b031916908160001a905350600f60fb1b81600181518110614c6157614c61615bbc565b60200101906001600160f81b031916908160001a9053506000614c85846002615a68565b614c90906001615ba9565b90505b6001811115614d08576f181899199a1a9b1b9c1cb0b131b232b360811b85600f1660108110614cc457614cc4615bbc565b1a60f81b828281518110614cda57614cda615bbc565b60200101906001600160f81b031916908160001a90535060049490941c93614d0181615f67565b9050614c93565b50831561193e5760405162461bcd60e51b815260206004820181905260248201527f537472696e67733a20686578206c656e67746820696e73756666696369656e746044820152606401610fd4565b6060610cca848460008585600080866001600160a01b03168587604051614d7e9190615beb565b60006040518083038185875af1925050503d8060008114614dbb576040519150601f19603f3d011682016040523d82523d6000602084013e614dc0565b606091505b50915091506148f48783838760608315614e3b578251600003614e34576001600160a01b0385163b614e345760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e74726163740000006044820152606401610fd4565b5081610cca565b610cca8383815115614e505781518083602001fd5b8060405162461bcd60e51b8152600401610fd49190614f2e565b508054614e76906159ef565b6000825580601f10614e86575050565b601f01602090049060005260206000209081019061207991905b808211156128255760008155600101614ea0565b600060208284031215614ec657600080fd5b81356001600160e01b03198116811461193e57600080fd5b60005b83811015614ef9578181015183820152602001614ee1565b50506000910152565b60008151808452614f1a816020860160208601614ede565b601f01601f19169290920160200192915050565b60208152600061193e6020830184614f02565b6001600160a01b038116811461207957600080fd5b8035614f6181614f41565b919050565b60008060408385031215614f7957600080fd5b8235614f8481614f41565b946020939093013593505050565b803560018110614f6157600080fd5b600060208284031215614fb357600080fd5b61193e82614f92565b600060a0828403121561169c57600080fd5b600080600080600080600060e0888a031215614fe957600080fd5b8735614ff481614f41565b965061500260208901614f92565b9550604088013561501281614f41565b9450606088013593506080880135925060a0880135915060c08801356001600160401b0381111561504257600080fd5b61504e8a828b01614fbc565b91505092959891949750929550565b60006020828403121561506f57600080fd5b813561193e81614f41565b60008060006060848603121561508f57600080fd5b833561509a81614f41565b925060208401356150aa81614f41565b929592945050506040919091013590565b6000602082840312156150cd57600080fd5b5035919050565b634e487b7160e01b600052604160045260246000fd5b604051606081016001600160401b038111828210171561510c5761510c6150d4565b60405290565b604051601f8201601f191681016001600160401b038111828210171561513a5761513a6150d4565b604052919050565b600082601f83011261515357600080fd5b81356001600160401b0381111561516c5761516c6150d4565b61517f601f8201601f1916602001615112565b81815284602083860101111561519457600080fd5b816020850160208301376000918101602001919091529392505050565b60008060008060008060008060008060006101608c8e0312156151d357600080fd5b6151dc8c614f56565b9a506151ea60208d01614f56565b99506151f860408d01614f56565b985061520660608d01614f56565b97506001600160401b038060808e0135111561522157600080fd5b6152318e60808f01358f01615142565b97508060a08e0135111561524457600080fd5b506152558d60a08e01358e01615142565b955061526360c08d01614f56565b945061527160e08d01614f56565b93506101008c013592506101208c013591506152906101408d01614f56565b90509295989b509295989b9093969950565b600080604083850312156152b557600080fd5b8235915060208301356152c781614f41565b809150509250929050565b60006001600160401b038211156152eb576152eb6150d4565b5060051b60200190565b600082601f83011261530657600080fd5b8135602061531b615316836152d2565b615112565b82815260059290921b8401810191818101908684111561533a57600080fd5b8286015b848110156153795780356001600160401b0381111561535d5760008081fd5b61536b8986838b0101615142565b84525091830191830161533e565b509695505050505050565b60ff8116811461207957600080fd5b600082601f8301126153a457600080fd5b813560206153b4615316836152d2565b828152606092830285018201928282019190878511156153d357600080fd5b8387015b858110156154235781818a0312156153ef5760008081fd5b6153f76150ea565b813561540281615384565b815281860135868201526040808301359082015284529284019281016153d7565b5090979650505050505050565b6000806000806080858703121561544657600080fd5b84356001600160401b038082111561545d57600080fd5b615469888389016152f5565b955060209150818701358181111561548057600080fd5b8701601f8101891361549157600080fd5b803561549f615316826152d2565b81815260059190911b8201840190848101908b8311156154be57600080fd5b928501925b828410156154e55783356154d681614f41565b825292850192908501906154c3565b975050505060408701359150808211156154fe57600080fd5b61550a888389016152f5565b9350606087013591508082111561552057600080fd5b5061552d87828801615393565b91505092959194509250565b801515811461207957600080fd5b6000806040838503121561555a57600080fd5b8235915060208301356152c781615539565b6000806040838503121561557f57600080fd5b823561558a81614f41565b915060208301356001600160401b038111156155a557600080fd5b6155b185828601615142565b9150509250929050565b600080604083850312156155ce57600080fd5b6155d783614f92565b915060208301356152c781614f41565b6000602082840312156155f957600080fd5b81356001600160401b0381111561560f57600080fd5b610cca84828501615142565b600080600080600060a0868803121561563357600080fd5b505083359560208501359550604085013594606081013594506080013592509050565b60008060008060008060c0878903121561566f57600080fd5b61567887614f92565b9550602087013561568881614f41565b945060408701359350606087013592506080870135915060a08701356001600160401b038111156156b857600080fd5b6156c489828a01614fbc565b9150509295509295509295565b6000806000606084860312156156e657600080fd5b83356156f181614f41565b9250602084013561570181614f41565b915060408401356001600160401b0381111561571c57600080fd5b61572886828701615142565b9150509250925092565b6000806000806080858703121561574857600080fd5b84356002811061575757600080fd5b9350602085013561576781614f41565b925060408501359150606085013561577e81614f41565b939692955090935050565b6000806040838503121561579c57600080fd5b82356157a781614f41565b915060208301356001600160401b038111156157c257600080fd5b6155b1858286016152f5565b600080600080600080600060e0888a0312156157e957600080fd5b87356157f481614f41565b965061580260208901614f92565b9550604088013561581281614f41565b9450606088013593506080880135925060a0880135915060c088013561583781615539565b8091505092959891949750929550565b6000806040838503121561585a57600080fd5b82356155d781614f41565b6001600160a01b038b811682528a81166020830152891660408201526101406060820181905260009061589a8382018b614f02565b6080840199909952505060a081019590955260c085019390935260e084019190915261010083015261012090910152949350505050565b60008060008060008060c087890312156158ea57600080fd5b6158f387614f92565b9550602087013561590381614f41565b945060408701359350606087013592506080870135915060a087013561592881615539565b809150509295509295509295565b602081526159506020820183516001600160a01b03169052565b6000602083015161596c60408401826001600160a01b03169052565b5060408301516001600160a01b038116606084015250606083015161014080608085015261599e610160850183614f02565b9150608085015160a085015260a085015160c085015260c085015160e085015260e0850151610100818187015280870151915050610120818187015280870151838701525050508091505092915050565b600181811c90821680615a0357607f821691505b60208210810361169c57634e487b7160e01b600052602260045260246000fd5b634e487b7160e01b600052602160045260246000fd5b600060208284031215615a4b57600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b8082028115828204841417610b4457610b44615a52565b600082615a9c57634e487b7160e01b600052601260045260246000fd5b500490565b600060208284031215615ab357600080fd5b813561193e81615539565b6000808335601e19843603018112615ad557600080fd5b8301803591506001600160401b03821115615aef57600080fd5b602001915036819003821315615b0457600080fd5b9250929050565b6001600160a01b03898116825288811660208301528781166040830152861660608201526080810185905260a0810184905260e060c08201819052810182905260006101008385828501376000838501820152601f909301601f191690910190910198975050505050505050565b600060208284031215615b8b57600080fd5b815161193e81614f41565b81810381811115610b4457610b44615a52565b80820180821115610b4457610b44615a52565b634e487b7160e01b600052603260045260246000fd5b600060018201615be457615be4615a52565b5060010190565b60008251615bfd818460208701614ede565b9190910192915050565b604081526000615c1a6040830185614f02565b905082151560208301529392505050565b6060810160028510615c4d57634e487b7160e01b600052602160045260246000fd5b93815260208101929092526001600160a01b031660409091015290565b601f8211156110e857600081815260208120601f850160051c81016020861015615c915750805b601f850160051c820191505b8181101561150e57828155600101615c9d565b81516001600160401b03811115615cc957615cc96150d4565b615cdd81615cd784546159ef565b84615c6a565b602080601f831160018114615d125760008415615cfa5750858301515b600019600386901b1c1916600185901b17855561150e565b600085815260208120601f198616915b82811015615d4157888601518255948401946001909101908401615d22565b5085821015615d5f5787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b6020808252602b908201527f496e697469616c697a61626c653a20636f6e7472616374206973206e6f74206960408201526a6e697469616c697a696e6760a81b606082015260800190565b60e081526000615dcd60e0830188614f02565b6001600160a01b038781166020850152861660408401528281036060840152615df68186614f02565b91505060ff8351166080830152602083015160a0830152604083015160c08301529695505050505050565b600060208284031215615e3357600080fd5b815161193e81615539565b600080600080600080600080610100898b031215615e5b57600080fd5b8851975060208901519650604089015195506060890151615e7b81614f41565b60808a0151909550615e8c81614f41565b60a08a0151909450615e9d81615384565b60c08a0151909350615eae81615384565b60e08a0151909250615ebf81615539565b809150509295985092959890939650565b604081526000615ee36040830185614f02565b90508260208301529392505050565b7f416363657373436f6e74726f6c3a206163636f756e7420000000000000000000815260008351615f2a816017850160208801614ede565b7001034b99036b4b9b9b4b733903937b6329607d1b6017918401918201528351615f5b816028840160208801614ede565b01602801949350505050565b600081615f7657615f76615a52565b50600019019056fe8f27397afa1a0717b99de0b1686080a578be96155bb363a1b981e95b1f05c66c3b49a237fe2d18fa4d9642b8a0e065923cceb71b797783b619a030a61d848bf0a2646970667358221220d6c08701b72b17965e97d904ad4b7b040141bff8fb95a1e6181351a7ca20e1d264736f6c63430008140033"

logging.basicConfig(filename="/tmp/K2_K2Lending_deployment.log",
                    filemode='a',
                    format='%(asctime)s,%(msecs)d %(name)s %(levelname)s %(message)s',
                    datefmt='%H:%M:%S',
                    level=logging.INFO)

def deploy_K2_K2Lending() -> (bool, dict):
    
    result = {
        "transaction": {},
        "receipt": {},
        "additional_info": {
            "contract_address": "" # Only populates if the contract was deployed successfully
        }
    }
    
    el_uri = os.getenv("EL_RPC_URI", 'http://0.0.0.0:53913')
    sender = get_sender()
    receiver = "0x0000000000000000000000000000000000000000"
    w3 = Web3(Web3.HTTPProvider(el_uri))
    # sleep for 10s before checking again
    time.sleep(10)
    
    # Check if the chain has started before submitting transactions
    block = w3.eth.get_block('latest')
    
    logging.info(f"Latest block number: {block.number}")
    if block.number > 1:
        logging.info("Chain has started, proceeding with PoN-K2Lending deployment")
        sender_account = w3.eth.account.from_key(sender)
        
        w3.middleware_onion.add(construct_sign_and_send_raw_middleware(sender_account))
        
        logging.info("Preparing PoN-K2Lending deployment tx")
        transaction = {
            "from": sender_account.address,
            "to": receiver,
            "value": 0,
            "gasPrice": w3.eth.gas_price,
            'nonce': w3.eth.get_transaction_count(sender_account.address),
            "data": BYTE_CODE
        }
        
        logging.info("Estimating gas")
        estimated_gas = w3.eth.estimate_gas(transaction)
        transaction["gas"] = estimated_gas
        
        logging.info("Sending PoN-K2Lending deployment tx")
        logging.debug(f"Sending deployment tx: {transaction}")
        tx_hash = w3.eth.send_transaction(transaction)
        
        time.sleep(10)
        K2Lending_tx = w3.eth.get_transaction(tx_hash)
        K2Lending_receipt = w3.eth.get_transaction_receipt(tx_hash)
        
        logging.info(f"PoN-K2Lending deployment tx: {K2Lending_tx}")
        logging.info(f"PoN-K2Lending deployment receipt: {K2Lending_receipt}")
        
        if K2Lending_receipt['status'] == 1:
            logging.info("PoN-K2Lending deployment successful")
            result["transaction"] = K2Lending_tx
            result["receipt"] = K2Lending_receipt
            result["additional_info"]["contract_address"] = K2Lending_receipt["contractAddress"]
            return True, result
        else:
            logging.info("PoN-K2Lending deployment failed")
            return False, result
        
    else:
        logging.info("Chain has not started, restarting deployment")
        return False, {}

def get_sender() -> str:
    # Extract the right private key from the list of private keys
    private_keys = os.getenv("PRIVATE_KEYS", ACCOUNT_ALIAS+":ac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80")
    private_keys.split(";")
    sender = ""
    for key in private_keys:
        if key.split(":")[0] == ACCOUNT_ALIAS:
            sender_keys = key.split(":")[1].split(",")
            sender = sender_keys[0]
            break
    return sender

def run_till_deployed() -> dict:
    deployment_status = False
    deployment_details = {}
    while deployment_status is False:
        try:
          deployment_status, deployment_details = deploy_K2_K2Lending()
        except Exception as e:
          logging.error(e)
          logging.error("restarting deployment as previous one failed")
    
    return deployment_details


if __name__ == "__main__":
    
    logging.info("PoN-K2Lending deployment started")
    deployment_details = run_till_deployed()
    logging.info("PoN-K2Lending deployment finished")
    
    print(deployment_details)
